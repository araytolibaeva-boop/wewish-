<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NurAray - Магазин автозапчастей</title>
<style>
body {font-family: Arial; background:#f5f5f5; padding:20px;}
.container {background:#fff; max-width:500px; margin:auto; padding:20px; border-radius:10px; box-shadow:0px 0px 10px #ccc;}
h1{text-align:center; color:#333;}
form{display:flex; flex-direction:column;}
label{margin-top:10px;}
input{padding:8px; margin-top:5px; border-radius:5px; border:1px solid #ccc;}
button{margin-top:15px; padding:10px; border:none; background:#4CAF50; color:white; border-radius:5px; cursor:pointer;}
button:hover{background:#45a049;}
#message{margin-top:15px; text-align:center; color:#333;}
</style>
</head>
<body>
<div class="container">
<h1>WeWish - Магазин автозапчастей</h1>
<p>Заполните форму, чтобы сделать заказ:</p>

<form action="YOUR_FORMSPREE_ENDPOINT" method="POST" id="orderForm">
<label for="name">Имя:</label>
<input type="text" id="name" name="name" required>

<label for="phone">Телефон:</label>
<input type="text" id="phone" name="phone" required>

<label for="car">Модель машины:</label>
<input type="text" id="car" name="car" required>

<label for="part">Нужная запчасть:</label>
<input type="text" id="part" name="part" required>

<button type="submit">Отправить заказ</button>
</form>

<p id="message"></p>
</div>

<script>
const form = document.getElementById("orderForm");

form.addEventListener("submit", async function(e){
    e.preventDefault(); // блокируем стандартную отправку формы
    const formData = new FormData(form);

    // 1. Отправка на Formspree
    const response = await fetch(form.action, {
        method: "POST",
        body: formData,
        headers: {'Accept':'application/json'}
    });

    if(response.ok){
        // 2. Сообщение на сайте
        const name = formData.get("name");
        document.getElementById("message").innerText = Спасибо, ${name}! Ваш заказ принят.;

        form.reset(); // очистка формы

        // 3. Отправка уведомления в Telegram
        fetch("https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage", {
            method: "POST",
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({
                chat_id: "YOUR_CHAT_ID",
                text: Спасибо, ${name}! Ваш заказ принят.\nИмя: ${formData.get("name")}\nТелефон: ${formData.get("phone")}\nМодель машины: ${formData.get("car")}\nЗапчасть: ${formData.get("part")}
            })
        });

    } else {
        document.getElementById("message").innerText = "Ошибка! Попробуйте ещё раз.";
    }
});
</script>
</body>
</html>
